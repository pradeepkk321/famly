{
  "id" : "patient-json-to-fhir-complex-v1",
  "name" : "Patient Example 1",
  "sourceType" : "PatientDTO",
  "targetType" : "Patient",
  "version" : "1.0.0",
  "direction" : "JSON_TO_FHIR",
  "fieldMappings" : [ {
    "id" : "patient-id",
    "sourcePath" : "patientId",
    "targetPath" : "identifier[0].value",
    "dataType" : "string",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-id-system",
    "sourcePath" : null,
    "targetPath" : "identifier[0].system",
    "dataType" : "uri",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : "$ctx.settings['identifierSystem']",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-id-type",
    "sourcePath" : null,
    "targetPath" : "identifier[0].type.coding[0].code",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : "MR",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-id-type-system",
    "sourcePath" : null,
    "targetPath" : "identifier[0].type.coding[0].system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : "http://terminology.hl7.org/CodeSystem/v2-0203",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ssn",
    "sourcePath" : "ssn",
    "targetPath" : "identifier[1].value",
    "dataType" : null,
    "transformExpression" : "fn.replace(value, '-', '')",
    "condition" : "ssn != null && ssn != ''",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ssn-system",
    "sourcePath" : null,
    "targetPath" : "identifier[1].system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ssn != null && ssn != ''",
    "validator" : null,
    "required" : false,
    "defaultValue" : "http://hl7.org/fhir/sid/us-ssn",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ssn-type",
    "sourcePath" : null,
    "targetPath" : "identifier[1].type.coding[0].code",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ssn != null && ssn != ''",
    "validator" : null,
    "required" : false,
    "defaultValue" : "SS",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-use",
    "sourcePath" : null,
    "targetPath" : "name[0].use",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : "official",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-family",
    "sourcePath" : "lastName",
    "targetPath" : "name[0].family",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-given-first",
    "sourcePath" : "firstName",
    "targetPath" : "name[0].given[0]",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-given-middle",
    "sourcePath" : "middleName",
    "targetPath" : "name[0].given[1]",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "middleName != null && middleName != ''",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-suffix",
    "sourcePath" : "suffix",
    "targetPath" : "name[0].suffix[0]",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "suffix != null && suffix != ''",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-gender",
    "sourcePath" : "gender",
    "targetPath" : "gender",
    "dataType" : "code",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : "gender-lookup",
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-birthdate",
    "sourcePath" : "dateOfBirth",
    "targetPath" : "birthDate",
    "dataType" : "date",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-marital-status-code",
    "sourcePath" : "maritalStatus",
    "targetPath" : "maritalStatus.coding[0].code",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : "marital-status-lookup",
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-marital-status-system",
    "sourcePath" : null,
    "targetPath" : "maritalStatus.coding[0].system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "maritalStatus != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "http://terminology.hl7.org/CodeSystem/v3-MaritalStatus",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-deceased",
    "sourcePath" : "isDeceased",
    "targetPath" : "deceasedBoolean",
    "dataType" : "boolean",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-email-system",
    "sourcePath" : null,
    "targetPath" : "telecom[0].system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "emailAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "email",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-email-value",
    "sourcePath" : "emailAddress",
    "targetPath" : "telecom[0].value",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "emailAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-email-use",
    "sourcePath" : null,
    "targetPath" : "telecom[0].use",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "emailAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "home",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-phone-system",
    "sourcePath" : null,
    "targetPath" : "telecom[1].system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "mobilePhone != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "phone",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-phone-value",
    "sourcePath" : "mobilePhone",
    "targetPath" : "telecom[1].value",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "mobilePhone != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-phone-use",
    "sourcePath" : null,
    "targetPath" : "telecom[1].use",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "mobilePhone != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "mobile",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-use",
    "sourcePath" : null,
    "targetPath" : "address[0].use",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "home",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-line1",
    "sourcePath" : "homeAddress.line1",
    "targetPath" : "address[0].line[0]",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-line2",
    "sourcePath" : "homeAddress.line2",
    "targetPath" : "address[0].line[1]",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null && homeAddress.line2 != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-city",
    "sourcePath" : "homeAddress.city",
    "targetPath" : "address[0].city",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-state",
    "sourcePath" : "homeAddress.state",
    "targetPath" : "address[0].state",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-zip",
    "sourcePath" : "homeAddress.zip",
    "targetPath" : "address[0].postalCode",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-address-country",
    "sourcePath" : "homeAddress.country",
    "targetPath" : "address[0].country",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "homeAddress != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-race-code",
    "sourcePath" : "race",
    "targetPath" : "extension[0].extension[0].valueCoding.code",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "race != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-race-system",
    "sourcePath" : null,
    "targetPath" : "extension[0].extension[0].valueCoding.system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "race != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "urn:oid:2.16.840.1.113883.6.238",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-race-url-inner",
    "sourcePath" : null,
    "targetPath" : "extension[0].extension[0].url",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "race != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "ombCategory",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-race-text",
    "sourcePath" : "race",
    "targetPath" : "extension[0].extension[1].valueString",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "race != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : "race-text-lookup",
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-race-text-url",
    "sourcePath" : null,
    "targetPath" : "extension[0].extension[1].url",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "race != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "text",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-race-url-outer",
    "sourcePath" : null,
    "targetPath" : "extension[0].url",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "race != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ethnicity-code",
    "sourcePath" : "ethnicity",
    "targetPath" : "extension[1].extension[0].valueCoding.code",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ethnicity != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ethnicity-system",
    "sourcePath" : null,
    "targetPath" : "extension[1].extension[0].valueCoding.system",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ethnicity != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "urn:oid:2.16.840.1.113883.6.238",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ethnicity-url-inner",
    "sourcePath" : null,
    "targetPath" : "extension[1].extension[0].url",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ethnicity != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "ombCategory",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ethnicity-text",
    "sourcePath" : "ethnicity",
    "targetPath" : "extension[1].extension[1].valueString",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ethnicity != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : "ethnicity-text-lookup",
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ethnicity-text-url",
    "sourcePath" : null,
    "targetPath" : "extension[1].extension[1].url",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ethnicity != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "text",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-ethnicity-url-outer",
    "sourcePath" : null,
    "targetPath" : "extension[1].url",
    "dataType" : null,
    "transformExpression" : null,
    "condition" : "ethnicity != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-managing-org",
    "sourcePath" : null,
    "targetPath" : "managingOrganization.reference",
    "dataType" : null,
    "transformExpression" : "fn.concat('Organization/', $ctx.organizationId)",
    "condition" : "$ctx.organizationId != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  } ]
}