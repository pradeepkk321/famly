{
  "id" : "patient-json-to-fhir",
  "name" : "Patient JSON to FHIR Mapping",
  "sourceType" : "PatientDTO",
  "targetType" : "Patient",
  "version" : "1.0.0",
  "direction" : "JSON_TO_FHIR",
  "fieldMappings" : [ {
    "id" : "patient-identifier-value",
    "sourcePath" : "patientId",
    "targetPath" : "identifier[0].value",
    "dataType" : "string",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-identifier-system",
    "sourcePath" : null,
    "targetPath" : "identifier[0].system",
    "dataType" : "string",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : "$ctx.settings[\"identifierSystem\"]",
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-family",
    "sourcePath" : "lastName",
    "targetPath" : "name[0].family",
    "dataType" : "string",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-name-given",
    "sourcePath" : "firstName",
    "targetPath" : "name[0].given[0]",
    "dataType" : "string",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-gender",
    "sourcePath" : "gender",
    "targetPath" : "gender",
    "dataType" : "code",
    "transformExpression" : null,
    "condition" : null,
    "validator" : null,
    "required" : true,
    "defaultValue" : null,
    "lookupTable" : "gender-lookup",
    "lookupSourceField" : null,
    "description" : "Converts M->male, F->female"
  }, {
    "id" : "patient-birthdate",
    "sourcePath" : "dateOfBirth",
    "targetPath" : "birthDate",
    "dataType" : "date",
    "transformExpression" : "fn:formatDate(value, 'yyyy-MM-dd')",
    "condition" : null,
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  }, {
    "id" : "patient-managing-org",
    "sourcePath" : null,
    "targetPath" : "managingOrganization.reference",
    "dataType" : "string",
    "transformExpression" : "fn:concat('Organization/', $ctx.organizationId)",
    "condition" : "$ctx.organizationId != null",
    "validator" : null,
    "required" : false,
    "defaultValue" : null,
    "lookupTable" : null,
    "lookupSourceField" : null,
    "description" : null
  } ]
}