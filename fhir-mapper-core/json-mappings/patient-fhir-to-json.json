{
  "id" : "patient-fhir-to-json-v1",
  "name" : "Patient FHIR to JSON Mapping",
  "sourceType" : "Patient",
  "targetType" : "PatientDTO",
  "version" : "1.0.0",
  "direction" : "FHIR_TO_JSON",
  "fieldMappings" : [ {
    "id" : "patient-id",
    "sourcePath" : "identifier[0].value",
    "targetPath" : "patientId",
    "dataType" : "string",
    "transformExpression" : "",
    "condition" : "",
    "validator" : "",
    "required" : true,
    "defaultValue" : "",
    "lookupTable" : "",
    "lookupSourceField" : null,
    "description" : ""
  }, {
    "id" : "patient-lastname",
    "sourcePath" : "name[0].family",
    "targetPath" : "lastName",
    "dataType" : "string",
    "transformExpression" : "",
    "condition" : "",
    "validator" : "",
    "required" : true,
    "defaultValue" : "",
    "lookupTable" : "",
    "lookupSourceField" : null,
    "description" : ""
  }, {
    "id" : "patient-firstname",
    "sourcePath" : "name[0].given[0]",
    "targetPath" : "firstName",
    "dataType" : "string",
    "transformExpression" : "",
    "condition" : "",
    "validator" : "",
    "required" : true,
    "defaultValue" : "",
    "lookupTable" : "",
    "lookupSourceField" : null,
    "description" : ""
  }, {
    "id" : "patient-gender-reverse",
    "sourcePath" : "gender",
    "targetPath" : "gender",
    "dataType" : "code",
    "transformExpression" : "",
    "condition" : "",
    "validator" : "",
    "required" : true,
    "defaultValue" : "",
    "lookupTable" : "gender-lookup-reverse",
    "lookupSourceField" : null,
    "description" : "Converts male->M, female->F (separate reverse lookup)"
  }, {
    "id" : "patient-dob",
    "sourcePath" : "birthDate",
    "targetPath" : "dateOfBirth",
    "dataType" : "date",
    "transformExpression" : "",
    "condition" : "",
    "validator" : "",
    "required" : false,
    "defaultValue" : "",
    "lookupTable" : "",
    "lookupSourceField" : null,
    "description" : "Direct copy, no transform needed"
  }, {
    "id" : "patient-org-id",
    "sourcePath" : "managingOrganization.reference",
    "targetPath" : "organizationId",
    "dataType" : "string",
    "transformExpression" : "fn:replace(value, 'Organization/', '')",
    "condition" : "managingOrganization != null",
    "validator" : "",
    "required" : false,
    "defaultValue" : "",
    "lookupTable" : "",
    "lookupSourceField" : null,
    "description" : "Extract ID from reference"
  } ]
}