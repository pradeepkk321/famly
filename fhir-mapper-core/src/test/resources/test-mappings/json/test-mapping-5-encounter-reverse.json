{
  "id": "encounter-fhir-to-json-v1",
  "name": "Encounter FHIR to JSON",
  "version": "1.0.0",
  "direction": "FHIR_TO_JSON",
  "sourceType": "Encounter",
  "targetType": "EncounterDTO",
  "fieldMappings": [
    {
      "id": "enc-id-reverse",
      "sourcePath": "identifier[0].value",
      "targetPath": "encounterId",
      "required": true
    },
    {
      "id": "enc-status-reverse",
      "sourcePath": "status",
      "targetPath": "status",
      "lookupTable": "encounter-status-lookup-reverse"
    },
    {
      "id": "enc-class-reverse",
      "sourcePath": "class.code",
      "targetPath": "classCode"
    },
    {
      "id": "enc-class-display-reverse",
      "sourcePath": "class.display",
      "targetPath": "classDisplay"
    },
    {
      "id": "enc-type-code-reverse",
      "sourcePath": "type[0].coding[0].code",
      "targetPath": "typeCode",
      "condition": "type != null && type.size() > 0"
    },
    {
      "id": "enc-type-display-reverse",
      "sourcePath": "type[0].coding[0].display",
      "targetPath": "typeDisplay",
      "condition": "type != null && type.size() > 0"
    },
    {
      "id": "enc-priority-code-reverse",
      "sourcePath": "priority.coding[0].code",
      "targetPath": "priorityCode",
      "condition": "priority != null"
    },
    {
      "id": "enc-priority-display-reverse",
      "sourcePath": "priority.coding[0].display",
      "targetPath": "priorityDisplay",
      "condition": "priority != null"
    },
    {
      "id": "enc-patient-id-reverse",
      "sourcePath": "subject.reference",
      "targetPath": "patientId",
      "transformExpression": "value != null && value.startsWith('Patient/') ? value.substring(8) : value",
      "required": true
    },
    {
      "id": "enc-participant-type-reverse",
      "sourcePath": "participant[0].type[0].coding[0].code",
      "targetPath": "participantTypeCode",
      "condition": "participant != null && participant.size() > 0"
    },
    {
      "id": "enc-participant-practitioner-reverse",
      "sourcePath": "participant[0].individual.reference",
      "targetPath": "attendingPhysicianId",
      "transformExpression": "value != null && value.startsWith('Practitioner/') ? value.substring(13) : value",
      "condition": "participant != null && participant.size() > 0"
    },
    {
      "id": "enc-period-start-reverse",
      "sourcePath": "period.start",
      "targetPath": "startDateTime",
      "dataType": "dateTime"
    },
    {
      "id": "enc-period-end-reverse",
      "sourcePath": "period.end",
      "targetPath": "endDateTime",
      "dataType": "dateTime"
    },
    {
      "id": "enc-reason-code-reverse",
      "sourcePath": "reasonCode[0].coding[0].code",
      "targetPath": "reasonCode",
      "condition": "reasonCode != null && reasonCode.size() > 0"
    },
    {
      "id": "enc-reason-display-reverse",
      "sourcePath": "reasonCode[0].coding[0].display",
      "targetPath": "reasonDisplay",
      "condition": "reasonCode != null && reasonCode.size() > 0"
    },
    {
      "id": "enc-hospitalization-admit-source-reverse",
      "sourcePath": "hospitalization.admitSource.coding[0].code",
      "targetPath": "admitSource",
      "condition": "hospitalization != null && hospitalization.admitSource != null"
    },
    {
      "id": "enc-hospitalization-discharge-disposition-reverse",
      "sourcePath": "hospitalization.dischargeDisposition.coding[0].code",
      "targetPath": "dischargeDisposition",
      "condition": "hospitalization != null && hospitalization.dischargeDisposition != null"
    },
    {
      "id": "enc-location-reference-reverse",
      "sourcePath": "location[0].location.reference",
      "targetPath": "locationId",
      "transformExpression": "value != null && value.startsWith('Location/') ? value.substring(9) : value",
      "condition": "location != null && location.size() > 0"
    },
    {
      "id": "enc-location-status-reverse",
      "sourcePath": "location[0].status",
      "targetPath": "locationStatus",
      "condition": "location != null && location.size() > 0"
    }
  ]
}